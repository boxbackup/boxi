<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html;charset=iso-8859-1" />
<title>Box Backup</title>
<link rel="stylesheet" href="bbstyles.css" type="text/css" />
</head>
<body>
<div align="center">
<div id="header">
<div id="logo">
<img src="images/bblogo.png" alt="logo" height="65" width="331" border="0" vspace="5" align="middle" /> <img src="images/stepahead.png" alt="a step ahead in data security" width="182" height="11" hspace="10" vspace="20" border="0" align="middle" /></div>
</div>
<div id="page">

<h1>Box Backup</h1>

<p>An open source, completely automatic on-line backup system for UNIX.
<ul>
<li>All backed up data is stored on the server in files on a filesystem -- no tape or archive devices are used
<li>The server is trusted only to make files available when they are required -- all data is encrypted
<li>A backup daemon runs on systems to be backed up, and copies encrypted data to the server when it notices changes
<li>Only changes within files are sent to the server, just like rsync
<li>Old versions of files on the server are stored as changes from the current version
<li>Behaves like tape -- old versions and deleted files are available
<li>Choice of backup behaviour, optimised for document or server backup
<li>Designed to be easy and cheap to run a server. Portable implementation, and RAID implemented in
userland for reliability without complex server setup or expensive hardware. (optional)
</ul>
</p>

<p>Project status: <b>Stable</b>, but not feature complete</p>

<p><a href="description.html">More information</a>: what it is, and how it works.</p>

<p><a href="comparison.html">Comparisons to other backup systems</a></p>

<p>Distributed under a BSD license. Please read the <a href="license.html">license and commentary</a> now.</p>

<h2>Author</h2>

<p>Ben Summers, <a href="mailto:ben@fluffy.co.uk">ben@fluffy.co.uk</a></p>

<h2>Project status</h2>

<p>This project should be considered as <b>stable, but not feature complete</b>. Over 6 months of testing
suggests it will be reliable enough to will back up your data, and make it available for restoration.</p>

<p>It has always been possible to <a href="retrieve.html">retrieve old versions</a> of files. 
Planned features will implement marked versions of the store to emulute backing up onto sets of tapes
in a controlled manner. This will make restoration of old versions much easier, although in the case
of retrieving a single old file will not make much difference to the usability as the FTP-like utility
is already effective.</p>

<p>Given that this is a backup system, I am being very conservative about when I consider it
ready for production use. That said, I trust my data to it!
However, as this is quite a young system compared to the alternatives, and operates in a slightly
different manner, for production use I must recommend that you regularly
<a href="restore.html">verify your backups</a>.</p>

<p>The documentation is not yet complete, and the error messages you get when things
go wrong are not as clear as they should be. (see the <a href="trouble.html">troubleshooting</a> page.)
Please <b>follow the instructions</b> carefully and read everything to avoid problems -- following the
instructions on this web site will result in a working installation.</p>


<h2>Why online backup?</h2>

<p>Because tape is not a reliable solution, unless you...</p>
<ul>
<li>spend lots of money on hardware and tapes (cheap hardware is not reliable)
<li>change the tape daily
<li>store the tapes off-site
</ul>
<p>which is hardly likely to happen in real life.</p>

<p>Backing up to media such as CDROMs is not really a solution either. It needs to be something which 
just happens without user intervention, and without media which is liable to be corrupted.</p>

<p>So, for the same price as a decent tape backup system, you could buy a server with three big hard discs.
And for the money you spend on tapes per year (you do replace them regularly, don't you?), you could host
it in a nice data centre somewhere.</p>

<p>We all have internet connections these days, so connectivity isn't really a problem.
Although it might be best to archive those
static files, like MP3s and images, to CDROM or something.</p>

<p>The costs are even less if you pool resources amongst a group of friends. Remember, you don't have 
to trust the server admin to not look at your files as they're encrypted. You just have to trust them to
make the files available when you need them.</p>

<h2>Offer of server space</h2>

<p>I would like as many people as possible to test this software. To help, I have a large amount of
disc space on a server, and am likely to give out a few Gb to people who ask nicely.</p>

<p>As I'm sure I have mentioned, everything is encrypted so you aren't trusting me with your data.
You will of course wish to review the code to check my claims are true.</p>

<h2>Mailing list</h2>

<p>Please join the project mailing list, boxbackup@fluffy.co.uk, for announcements of new versions
and discussion of the system. Join at the <a href="http://lists.warhead.org.uk/mailman/listinfo/boxbackup">sign up page</a>.</p>

<p>Many thanks to <a href="http://www.warhead.org.uk">Alaric</a> for hosting this list.</p>

<h2>Implementation</h2>

<p>There are three main elements</p>
<ul>
<li>bbstored -- backup store server.
<li>bbackupd -- backup client daemon, which scans for changes and uploads them to the server.
<li>bbackupquery -- backup query and restore tool.
</ul>
<p>Running the store server is a multi-step process, but the backup client is easy.</p>

<p>TLS (SSL revised) is used to encrypt connections, and more importantly, to authenticate servers
and clients with both server and client side certificates. Scripts are provided to generate and
manage these certificates.</p>

<p>Stored files are encrypted using AES for file data and Blowfish for metadata. This does mean that the one thing you do need to
back up off-site and look after is a 1k file containing your keys -- the data on the server is useless
without it. But it never changes, so that's OK.</p>

<h2>Platforms</h2>

<p>I develop under Darwin and deploy on OpenBSD. The software is designed to take advantage of BSD features
where useful, but not to rely on them. It should be easily portable to other UNIX like operating
systems. I have done ports to the following platforms:</p>
<ul>
<li><b>OpenBSD</b> (primary platform)
<li><b>Linux</b> (Tested with Debian and RedHat Fedora distributions, configure script should work on other distributions)
<li><b>NetBSD</b> (minor issues with dates on symlinks)
<li><b>FreeBSD</b>
<li><b>Darwin</b> / Mac OS X (not really useful, as it doesn't do anything with Mac extended attributes and metadata)
<li><b>Cygwin (Windows)</b> (client only)
</ul>
<p>On these platforms, the software compiles and the tests pass. I do all my deployment on OpenBSD, but I know of
several people who have had good results under Linux.</p>

<p>More platforms will arrive over time. It takes in general a couple of hours to get it compiling on a BSD-like
UNIX, and a bit longer on something like Linux which deviates from the BSD way of doing things.</p>

<p>I welcome patches for other platforms, and volunteers to look after ports for a particular platform.
Programmers notes describing how everything works are included
in the <tt>notes</tt> directory within the distribution archive.</p>

<h2>Download</h2>

<p>Source only distribution. See documentation on this web site for compilation and installation notes.
See <tt>notes</tt> directory inside distribution archive for programmers notes.</p>

<p><tt><a href="http://prdownloads.sourceforge.net/boxbackup/boxbackup-0.08.tgz?download">boxbackup-0.08.tgz</a></tt> (486k, released 23 September 2004)<br>
(download via SourceForge)</p>

<!--<p><tt><a href="bin/boxbackup-0.04.tgz">boxbackup-0.04.tgz</a></tt> (417k, released 16 Mar 2004)</p>-->

<p><a href="006-007.html">Notes on upgrading from 0.06 to 0.07</a>,
<a href="005-006.html">0.05 to 0.06</a>,
<a href="004-005.html">0.04 to 0.05</a></p>

<p><b>A 0.08 or later server requires all clients to be version 0.08 or later too.</b> Existing backup store accounts
are compatible with 0.08, and do not require conversion.</p>

<p><b>Changes:</b></p>
<dl>
<dt>0.08 (23 September 2004)
<dd>Minor bug fixes<br>
Server stores old versions of files as patches from the current version<br>
Adjust behaviour of client<br>
Works under 64bit systems<br>
Client recovers cleanly from corruption of its working files<br>
Improvements to build system<br>
Add contributed code for building RPMs

<dt>0.07 (28 June 2004)
<dd>Minor bug fixes<br>
Improvements to build process, including better detection of environment on Linux, especially SuSE 9.x<br>
Fix wrong space used sizes on store with non-RAID (<a href="006-007.html">see notes</a>)<br>
Be more paranoid about crypto startup<br>
Extra checking for file modifications<br>
SyncAllowScript to allow temporary disabling of syncs, eg only backup from a laptop on certain network connections<br>
Add force-sync command to bbackupctl, like sync but ignores AllowSyncScript

<dt>0.06 (21 May 2004)
<dd>Bug fixes<br>
Use AES for file data<br>
Cygwin port of client<br>
Add usage command to bbackupquery<br>
Add delete [yes] command to bbstoreaccounts<br>
Add check [fix] [quiet] command to bbstoreaccounts<br>
Deleted locations in conf file get deleted from server

<dt>0.05 (10 Apr 2004)
<dd>Bug fixes<br>
Added configurable "max diffing time" parameter, improved speed of diffing algorithm in edge cases<br>
Added support for old versions of OpenSSL -- experimental only (but appears to work fine)<br>
Read errors on files and directories are reported neatly, and no longer abort the backup scan<br>
NetBSD port fixed<br>
Server more tolerant of being unexpectedly aborted

<dt>0.04 (16 Mar 2004)
<dd>Bug fixes and code clean up<br>
Change to standard BSD license<br>
Expanded error messages<br>
Improved flexibility with backup timing, including the ability to do snapshot backups<br>
Exclude files explictly or with regular expressions<br>
More work arounds for memory issues with STL in gcc 2.95.x (the gcc 3 version is fine)<br>
In bbackupquery, add a 'ls' alias, and include 'help' command to document all commands<br>
The *-config programs are improved and validates options and the configuration more to catch common problems<br>
bbackupd-config excludes keys file if it might be backed up<br>
Add bbackupctl program for controlling bbackupd daemon<br>
bbstoreaccounts takes sizes in blocks, Mb or Gb with unit suffix<br>
Start and end of last sync recorded in bbackupd working dir<br>
bbackupquery compares check last modification time to see if this explains any difference<br>
bbackupd will run a script run to alert administator that store is full (the default script sends an email)

<dt>0.03 (27 Jan 2004)
<dd>Improvements to the build system, especially configuring for random Linux systems.<br>
Worked round an issue with the gcc 2.95.x libraries which meant that the backup daemon
slowly used more and more memory.<br>
Efficiency improvements.

<dt>0.02 (22 Jan 2004)
<dd>First public release
</dl>

<h2>Documentation</h2>

<p>This is basic documentation, which will be improved. Note that configuration uses a number
of scripts to do the hard work -- these all output a lot of detailed instructions on exactly
what to do. Please read it.</p>
<ul>
<li><a href="license.html">License and commentary</a> -- please read
<li><a href="install.html">Compilation and installation</a>
<li><a href="client.html">Configuring a client</a>
<li><a href="server.html">Configuring a server</a>
<li><a href="accounts.html">Certificates and accounts management</a>
<li><a href="restore.html">Verify and restore backups</a>
<li><a href="retrieve.html">Retrieving deleted and old files</a>
<li><a href="bbackupctl.html">Controlling a backup client</a>
<li><a href="space.html">Checking the storage space used on the server</a>
<li><a href="serverfix.html">Fixing problems with corruption on the server</a>
<li><a href="nonroot.html">Running without root</a>
<li><b><a href="trouble.html">Troubleshooting</a></b>
</ul>


<p>Programmers notes on how the system works can be found within the notes directory inside the
distribution archive. In particular, read <tt>notes/backup_encryption.txt</tt> for details of how
the encryption scheme works, and where to look in the code to verify it.</p>

<h2>Planned future work</h2>

<ul>
<li>More platforms -- probably with autoconf script instead of current build system
<li>Mark state (marks the current state of the filesystem, to emulate a tape change and restoring from that tape later)
<li>Proper Win32 port of the client, as using Cygwin isn't that nice (server is definitely UNIX only, relies on filesystem behaviour)
<li>Bandwidth throttling with timed limits
<li>Make a OpenBSD "port" for easy installation, when the system is stable enough for general use
<li>Implement metadata for Darwin, produce Mac OS X backup system
</ul>

<p>&nbsp;</p>
<p>&copy; Ben Summers, 2003, 2004</p>
<p>&nbsp;</p>
<p>Web design by <a href="http://www.wpdfd.com">Joe Gillespie</a></p>
<p>&nbsp;</p>
</div>
</div>
</body>
</html>