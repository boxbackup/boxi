<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html;charset=iso-8859-1" />
<title>Troubleshooting Box Backup</title>
<link rel="stylesheet" href="bbstyles.css" type="text/css" />
</head>
<body>
<div align="center">
<div id="header">
<div id="logo">
<img src="images/bblogo.png" alt="logo" height="65" width="331" border="0" vspace="5" align="middle" /> <img src="images/stepahead.png" alt="a step ahead in data security" width="182" height="11" hspace="10" vspace="20" border="0" align="middle" /></div>
</div>
<div id="page">

<h1>Troubleshooting Box Backup</h1>

<p><ul><li><b>Note</b>: If you are trying to fix a store after your disc has been corrupted, see
<a href="serverfix.html">fixing problems with corruption on the server</a>.</ul></p>

<p>Unfortunately, the error messages are not particularly helpful at the moment. This page lists
some of the common errors, and the most likely causes of them.</p>

<p>When an error occurs, you will see a message like '<tt>Exception: RaidFile/OSFileError (2/8)</tt>' either
on the screen or in your log files. (it is recommended you set up another log file as recommended
in the <a href="server.html">server setup instructions</a>.)</p>

<p>This error may not be particularly helpful, although some do have extra information about probable causes.
To get further information, check the <tt>ExceptionCodes.txt</tt> file in the root of the distribution.
This file is generated by the <tt>./configure</tt> script, so you will need to have run that first.</p>

<p>Some common causes of exceptions are listed below.</p>

<p>Please email me with any other codes you get, and I will let you know what they mean, and add
notes here.</p>


<h2>RaidFile (2/8)</h2>

<p>This is found either when running <tt>bbstoreaccounts</tt> or in the <tt>bbstored</tt> logs.</p>

<p><b>Problem:</b> The directories you specified in the raidfile.conf are not writable by the _bbstored user.</p>

<p><b>Resolution:</b> Change permissions appropriately.</p>


<h2>Common (1/2)</h2>

<p>This usually occurs when the configuration files can't be opened.</p>

<p><b>Problem:</b> You created your configurations in non-standard locations, and the programs
cannot find them.</p>

<p><b>Resolution:</b> Explicitly specify configuration file locations to daemons and programs. For example</p>
<pre>
/usr/local/bin/bbstored /some/other/dir/bbstored.config
/usr/local/bin/bbackupquery -c /some/other/dir/bbackupd.config
</pre>
<p>(daemons specify the name as the first argument, utility programs with the <tt>-c</tt> option.</p>

<p><b>Problem:</b> <tt>bbstored</tt> can't find the <tt>raidfile.conf</tt> file specified in <tt>bbstored.conf</tt>.</p>

<p><b>Resolution:</b> Edit <tt>bbstored.conf</tt> to point to the correct location of this additional configuration file.</p>


<h2>Server (3/16)</h2>

<p>The server can't listen for connections on the IP address specified when you configured it.</p>

<p><b>Problem:</b> This probably means you've specified the wrong hostname to bbstored-config --
maybe your server is behind a NAT firewall?</p>

<p><b>Resolution:</b> Edit <tt>bbstored.conf</tt> and correct the <tt>ListenAddresses</tt> line. You
should replace the server address with the IP address of your machine.</p>


<h2>Connection (7/x)</h2>

<p>These errors all relate to connections failing -- you may see them during operation if there
are network failures or other problems between the client and server. The backup system will recover
from them automatically.</p>


<p>&nbsp;</p>

<h1>Advanced troubleshooting</h1>

<p>If this really doesn't help, then using the DEBUG builds of the system will give you much more
information -- a more descriptive exception message and the file and line number where the error occurred.</p>

<p>For example, if you are having problems with <tt>bbstoreaccounts</tt>, build the debug version with</p>

<pre>
cd boxbackup-0.0
cd bin/bbstoreaccounts
make
</pre>

<p>(within the module directories, <tt>make</tt> defaults to building the debug version. At the top level, 
it defaults to release.)</p>

<p>This will build an executable in <tt>debug/bin/bbstoreaccounts</tt> which you can then use instead
of the release version. It will give far more useful error messages.</p>

<p>When you get an error message, use the file and line number to locate where the error occurs in the
code. There will be comments around that line to explain why the exception happened.</p>

<p>If you are using a debug version of a daemon, these extended messages are found in the log files.</p>

<p>Please get in touch if you need any help.</p>

<p>&nbsp;</p>
<p>&copy; Ben Summers, 2003, 2004</p>
<p>&nbsp;</p>
</div>
</div>
</body>
</html>



