<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html;charset=iso-8859-1" />
<title>Box Backup compile and install</title>
<link rel="stylesheet" href="bbstyles.css" type="text/css" />
</head>
<body>
<div align="center">
<div id="header">
<div id="logo">
<img src="images/bblogo.png" alt="logo" height="65" width="331" border="0" vspace="5" align="middle" /> <img src="images/stepahead.png" alt="a step ahead in data security" width="182" height="11" hspace="10" vspace="20" border="0" align="middle" /></div>
</div>
<div id="page">

<h1>Box Backup compile and install</h1>

<p>In the following instructions, replace <tt>0.00</tt> with the actual version number
of the archive you have downloaded.</p>

<p>You need the latest version of OpenSSL, as some of the extra APIs it provides are required.
You should have this anyway, as earlier versions have security flaws. (If you have an earlier
version installed, the configuration script will give you instructions on enabling experimental
support for older versions.)</p>

<p>See <a href="openssl.html">OpenSSL notes</a> for more information on OpenSSL issues.</p>

<p>There are some notes in the archive about compiling on various platforms within the
<tt>boxbackup-0.00</tt> directory -- <b>read them first</b>. For example, if you are compiling under Linux,
look for <tt>LINUX.txt</tt> as <tt>boxbackup-0.00/LINUX.txt</tt> after untaring the archive.</p>

<p>Download the archive, then in that directory type</p>

<pre>
tar xvzf boxbackup-0.00.tgz
cd boxbackup-0.00
./configure
make
</pre>

<p>The server and client will be built and packaged up for installation on this machine,
or ready to be transferred as tar files to another machine for installation.</p>

<p>This builds two parcels of binaries and scripts, 'backup-client' and 'backup-server'.
The generated installation scripts assumes you want everything installed in
<tt>/usr/local/bin</tt></p>

<p>Optionally, type <tt>make test</tt> to run all the tests.</p>

<h2>Local installation</h2>

<p>Type <tt>make install-backup-client</tt> to install the backup client.</p>

<h2>Remote installation</h2>

<p>In the <tt>parcels</tt> directory, there are tar files for each parcel. The name reflects
the version and platform you have built it for.</p>

<p>Transfer this tar file to the remote server, and unpack it, then run the install script.
For example:</p>

<pre>
tar xvzf boxbackup-0.00-backup-server-OpenBSD.tgz
cd boxbackup-0.00-backup-server-OpenBSD
./install-backup-server
</pre>

<h2>Configure options</h2>

<p>You can use arguments to the <tt>configure</tt> script to adjust the compile and
link lines in the generated Makefiles, should this be necessary for your platform.</p>

<p>Arguments of the form <tt>compile:-option</tt> add the text <tt>-option</tt> to all
compile statements, and arguments of the form <tt>link:-option</tt> add the text
<tt>-option</tt> to all link statements.</p>

<p>For example, the line</p>

<pre>
  ./configure compile:-I/usr/local/share/include link:-lspecial
</pre>

<p>would configure the system to also search the <tt>/usr/local/share/include</tt> path
for include files and link with the <tt>special</tt> library.</p>

<p>You may include as many arguments as you need, and they are applied in order.</p>

<p>See <a href="openssl.html">OpenSSL notes</a> for the OpenSSL specific options.</p>

<h2>Tests</h2>

<p>There are a number of unit tests provided. To compile and run one type...</p>

<pre>
./runtest.pl bbackupd release
./runtest.pl common debug
./runtest.pl ALL
</pre>

<p>The runtest.pl script will compile and run the test. The first argument is the test name,
and the second the type of build. Use ALL as a test name to run all the tests.</p>

<p>The output from the tests is slightly muddled using this script. If you're developing, porting
or trying out new things, it might be better to use the following scheme:</p>

<pre>
cd test/bbackupd
make
cd ../../debug/test/bbackupd
./t
</pre>

<p>or in release mode...</p>

<pre>
cd test/bbackupd
make -D RELEASE
cd ../../release/test/bbackupd
./t
</pre>

<p>(use RELEASE=1 with GNU make)</p>

<p>I tend to use two windows, one for compilation, and one for running tests.</p>

<p>&nbsp;</p>
<p>&copy; Ben Summers, 2003, 2004</p>
<p>&nbsp;</p>
</div>
</div>
</body>
</html>
