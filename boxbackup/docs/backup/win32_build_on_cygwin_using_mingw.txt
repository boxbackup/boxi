How to build Box Backup on Win32 using Cygwin and MinGW
By Chris Wilson, 2005-12-07

Install Cygwin on your Windows box [http://www.cygwin.org]
Make sure to include the following packages:
* Devel/gcc-mingw
* Devel/gcc-mingw-core
* Devel/gcc-mingw-g++
* Mingw/mingw-zlib

Download OpenSSL from 
[http://www.openssl.org/source/openssl-0.9.7i.tar.gz]

Open a Cygwin shell, and unpack OpenSSL:

	tar xzvf openssl-0.9.7i.tar.gz

Configure OpenSSL for MinGW compilation, and build and install it:

	cd openssl-0.9.7i
	./Configure --prefix=/usr/i686-pc-mingw32/ mingw
	make
	make install

Download PCRE from 
[http://prdownloads.sourceforge.net/pcre/pcre-6.3.tar.bz2?download]

Open a Cygwin shell, and unpack PCRE:

	tar xjvf pcre-6.3.tar.bz2

Configure PCRE for MinGW compilation, and build and install it:
	
	cd pcre-6.3
	export CFLAGS="-mno-cygwin"
	./configure
	make winshared
	cp .libs/pcreposix.dll /bin
	cp .libs/pcreposix.dll.a /usr/i686-pc-mingw32/lib
	cp pcreposix.h /usr/i686-pc-mingw32/include/regex.h

Now unpack the Box Backup sources, enter the source directory,
and configure like this:

	export CXX="g++ -mno-cygwin"
	export LD="g++ -mno-cygwin"
	export CFLAGS="-mno-cygwin -mthreads"
	export CXXFLAGS="-mno-cygwin -mthreads"
	export LDFLAGS="-mno-cygwin -mthreads"
	export LIBS="-lcrypto -lws2_32 -lgdi32"
	(if you don't have a "configure" file, run "./bootstrap")
	./configure --target=i686-pc-mingw32
	make

